version: 1.0
provider:
  name: openfaas
functions:
  parse-forecastnats:
    lang: node12-nats
    handler: ./parse-forecastnats
    image: oillescas/parse-forecastnats:latest
    environment:
      endpoint: my-minio.default.svc.cluster.local
      minio-port: 9000
      use-ssl: false
      db_name: forecast
      db_host: forecast-database-rs0.default.svc.cluster.local
    secrets: 
    - openfaas-minio
    - openfaas-mongo
    annotations:
      topic: "minio"
